# 駅伝速報システム - 使い方ガイド

## 🎉 システムが完成しました!

駅伝大会のリアルタイム速報システムが完全に動作しています。

## 📋 システム概要

### 主な機能
1. **管理画面**: イベント作成、チーム登録
2. **iPad入力画面**: 各地点でスタッフがゼッケン番号を入力
3. **速報画面**: リアルタイムで観客が順位と通過状況を確認
4. **WebSocketによるリアルタイム更新**: 入力と同時に速報画面が自動更新

## 🚀 起動方法

システムは既に起動しています!以下のURLにアクセスしてください:

### メインページ
```
http://localhost:3000
```

### 管理画面ログイン
```
http://localhost:3000/admin/login
```
- **ユーザー名**: `admin`
- **パスワード**: `admin123`

## 📝 使用手順

### 1. イベントの作成

1. 管理画面にログイン
2. 「新規イベント作成」ボタンをクリック
3. イベント名と開催日を入力
4. 「作成」ボタンをクリック

### 2. チームの登録

1. ダッシュボードから作成したイベントの「管理」ボタンをクリック
2. 「チーム追加」ボタンをクリック
3. 以下の情報を入力:
   - ゼッケン番号
   - チーム名
   - メンバー5名の氏名
4. 「追加」ボタンをクリック
5. 参加チーム全てを登録

### 3. iPad入力画面の準備

1. ダッシュボードからイベントの「入力画面」ボタンをクリック
2. このURLを各地点のiPadで開く
   ```
   http://localhost:3000/checkpoint/[イベントID]
   ```
3. 各地点(1km, 2km, 3km, 4km)で担当者がこの画面を開いておく

### 4. 速報画面の表示

1. ダッシュボードからイベントの「速報画面」ボタンをクリック
2. このURLを大画面やプロジェクターで表示
   ```
   http://localhost:3000/live/[イベントID]
   ```
3. 観客が見える場所に表示

### 5. 大会当日の運用

#### iPad入力担当者の操作:
1. 画面上部でチェックポイント(1km, 2km, 3km, 4km)を選択
2. ランナーが通過したら、ゼッケン番号を入力
3. 「通過記録」ボタンをタップ
4. 画面下部のチーム一覧からも選択可能

#### 自動で行われること:
- 入力と同時に速報画面がリアルタイム更新
- 順位が自動計算される
- 現在何走目かが自動判定される
- 通過時刻が記録される

## 🎨 画面の見方

### iPad入力画面
- **接続状態**: 上部に「接続中」と表示されていればOK
- **チェックポイント選択**: 大きなボタンで地点を選択
- **ゼッケン入力**: 中央の大きな入力欄に番号を入力
- **参加チーム一覧**: 下部にタップで選択できるチーム一覧

### 速報画面
- **現在の順位**: 左側に1位から順にランキング表示
  - 1位は金色、2位は銀色、3位は銅色で表示
- **詳細情報**: 右側に各チームの詳細
  - 現在走っているメンバーが緑色でハイライト
  - 通過記録の履歴を表示
- **最新の通過情報**: 下部に最新10件の通過情報

## 💡 Tips

### 複数のiPadで同時入力
- 各地点で別々のiPadから同時に入力できます
- 同じチーム・同じ地点の重複入力は自動でブロックされます

### ネットワーク環境
- 全てのデバイスが同じネットワークに接続されている必要があります
- iPadのブラウザでURLを開くだけでOK

### トラブルシューティング
- 「未接続」と表示される場合: ページを再読み込み
- 記録が反映されない場合: サーバーが起動しているか確認

## 🔧 開発者向け情報

### サーバーの起動
```bash
cd /Users/aki/Library/CloudStorage/Dropbox/14_Cursor/02_開発ツール/02_駅伝速報ツール
npm run dev
```

### サーバーの停止
現在バックグラウンドで実行中です。停止する場合:
```bash
# プロセスを確認
ps aux | grep node

# プロセスIDを確認してkill
kill [プロセスID]
```

### データベースのリセット
```bash
rm prisma/dev.db
npx prisma migrate dev --name init
npx prisma db seed
```

## 📊 技術スタック

- **フロントエンド**: Next.js 15, React 18, Tailwind CSS
- **バックエンド**: Next.js API Routes, Node.js
- **データベース**: SQLite + Prisma ORM
- **リアルタイム通信**: Socket.IO
- **認証**: NextAuth.js

## 🎯 今後の拡張案

- スマートフォン対応の最適化
- タイム計測機能の追加
- 記録のエクスポート機能(CSV/Excel)
- 複数イベントの同時進行対応
- 写真アップロード機能

---

## ✅ 完成したシステムの確認

現在、以下が完全に動作しています:
- ✅ 管理画面でのイベント作成
- ✅ チーム登録機能
- ✅ iPad入力画面(4地点対応)
- ✅ リアルタイム速報画面
- ✅ WebSocketによる自動更新
- ✅ 順位の自動計算
- ✅ 走者の自動判定

**システムは完全に稼働しています。お疲れ様でした!** 🎉
